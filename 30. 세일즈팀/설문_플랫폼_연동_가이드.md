# Cursor → 설문 플랫폼 연동 가이드

Cursor에서 질문/주제를 입력하면 설문 플랫폼에 설문지가 자동 생성되도록 하는 방법 정리.

---

## 1. 추천 설문 플랫폼 (API 지원)

| 플랫폼 | API | 장점 | 단점 |
|--------|-----|------|------|
| **Google Forms** | [Forms API](https://developers.google.com/workspace/forms/api) | 무료, Google 계정만 있으면 됨, Python 공식 지원 | OAuth 설정 필요, 생성 후 `batchUpdate`로 문항 추가 |
| **Typeform** | [Create API](https://www.typeform.com/developers/create/) | 대화형 UX, REST API, 문서 양호 | 무료 플랜 제한, 이미지는 미리 업로드 필요 |
| **Tally.so** | [Forms API](https://developers.tally.so/api-reference/endpoint/forms/post) | 무료 티어, Airtable 등 연동 쉬움 | 블록(UUID) 구조 설계 필요 |
| **SurveyMonkey** | REST API (OAuth 2.0) | 기능 많음 | 유료 플랜에서 API 기능 풀 사용 |
| **Qualtrics** | v3 REST API | 엔터프라이즈급 | 비용·설정 부담 |

**Cursor와 연동하기엔 Google Forms 또는 Typeform이 가장 현실적**입니다. (무료·문서·예제 풍부)

---

## 2. 연동 흐름 (전체)

```
[Cursor에서 질문/주제 입력]
        ↓
[규칙 또는 단축어 감지, 예: "%설문 고객 만족도 5문항"]
        ↓
[스크립트 실행: 질문 텍스트 → 문항 구조 파싱 (LLM 또는 템플릿)]
        ↓
[선택한 플랫폼 API 호출로 폼 생성]
        ↓
[편집 URL / 응답 URL 반환]
```

---

## 3. Google Forms로 연동 (권장)

### 3.1 필요한 것

- Google Cloud 프로젝트에서 **Google Forms API** 활성화
- OAuth 2.0 클라이언트 ID (데스크톱 앱) → `credentials.json` (Gmail 스크랩과 동일한 프로젝트에 Forms API만 추가 가능)
- Python: `google-api-python-client`, `google-auth-oauthlib` (이미 Gmail 스크랩에서 사용 중일 수 있음)

### 3.2 기본 단계

1. **폼 생성**: `forms.create()` 로 제목만 넣어 빈 폼 생성 → `formId` 획득  
2. **문항 추가**: `forms.batchUpdate()` 로 `createItem` 요청을 여러 개 보내서 질문(단답, 객관식, 체크박스 등) 추가  
3. **링크**: `https://docs.google.com/forms/d/{formId}/edit` (편집), `https://docs.google.com/forms/d/{formId}/viewform` (응답)

### 3.3 Cursor와 연결하는 방법

**옵션 A – 단축어 + 스크립트 (권장)**

- `.cursor/rules` 에 규칙 추가: 예) `%설문 [주제 또는 문항 설명]` 입력 시 “설문 자동 생성” 명령으로 인식.
- 프로젝트에 스크립트 예: `Skills/설문 연동/question_to_google_form.py`
  - 인자: 설문 제목, 문항 설명(한 줄 또는 JSON).
  - 내부: (선택) LLM으로 문항/선택지 파싱 → Forms API로 `create` + `batchUpdate` → 생성된 폼 URL 출력.
- Cursor 에이전트가 해당 스크립트를 호출하고, 터미널/출력에 나온 폼 링크를 사용자에게 전달.

**옵션 B – 수동 실행**

- Cursor에서 “이 주제로 설문지 만들어줘”라고 하면, 에이전트가 같은 스크립트를 제안하거나 대신 실행해 주고, 결과 URL만 알려 주는 방식.

### 3.4 스크립트 예시 (개념)

```python
# question_to_google_form.py (개념)
# 1. argparse 또는 stdin으로 "제목" + "문항 설명" 받기
# 2. (선택) Claude/OpenAI로 "문항 리스트(제목, 타입, 선택지)" JSON 생성
# 3. forms.create(body={"info": {"title": 제목}}) 호출
# 4. batchUpdate로 각 문항 createItem
# 5. print(f"편집: https://docs.google.com/forms/d/{form_id}/edit")
# 6. print(f"응답: https://docs.google.com/forms/d/{form_id}/viewform")
```

---

## 4. Typeform으로 연동

- **인증**: [Typeform 개발자](https://admin.typeform.com/signup)에서 계정 생성 → Personal access token 발급.
- **생성**: `POST https://api.typeform.com/forms` 에 `title`, `fields`(질문 배열), `welcome_screens`, `thankyou_screens` 등 JSON 전달.
- **필드 타입**: `short_text`, `long_text`, `multiple_choice`, `dropdown`, `email`, `rating` 등.
- Cursor 연동: Google Forms와 동일하게 “질문/주제 텍스트 → (LLM) 구조 파싱 → Typeform API 호출” 스크립트를 두고, 단축어나 요청 시 실행.

---

## 5. Tally.so로 연동

- **인증**: [Tally 개발자](https://developers.tally.so/)에서 API 토큰 발급.
- **생성**: `POST https://api.tally.so/forms` 에 `blocks` 배열(UUID + 블록 타입별 payload) 전달.
- Cursor 연동: “질문 텍스트 → blocks 스키마로 변환 → POST” 스크립트를 만들어 같은 방식으로 호출.

---

## 6. 정리: Cursor에서 쓰기 좋은 조합

1. **Google Forms**  
   - Gmail 스크랩과 같은 Google Cloud 프로젝트에 Forms API만 추가해 OAuth 재사용.  
   - `Skills/설문 연동/question_to_google_form.py` + `%설문` 규칙으로 “질문 → 설문 자동 생성” 구현.

2. **Typeform**  
   - 무료/스타터 플랜으로 시작해 API 토큰만 발급.  
   - 대화형 설문이 필요할 때 선택.

3. **공통**  
   - “질문/주제 한 덩어리”를 **문항·선택지 구조**로 바꾸는 건 LLM(Claude 등) 한 번 호출해서 JSON으로 받고, 그걸로 각 플랫폼 API를 호출하는 방식이 가장 유연합니다.

**구현 완료**: `Skills/설문 연동/question_to_google_form.py`  
- 사용법: `python3 "Skills/설문 연동/question_to_google_form.py" "제목" -q "질문1" -q "질문2"`  
- credentials: 이 폴더 또는 `Skills/이메일 스크랩/credentials.json` (같은 프로젝트면 복사해 두면 됨).  
- 자세한 설정: `Skills/설문 연동/README.md` 참고.
